# 网络请求杂知识点汇总

## 常用方法
```java
//连接超时
//设置通过网络与服务器建立连接的超时时间 
HttpConnectionParams.setConnectionTimeout(parms, 5 * 1000);
```
```java
//请求超时
//设置从服务器获取响应数据需要等待的时间
HttpConnectionParams.setSoTimeout(parms, 30 * 1000);
```

## 常用Http类
### HttpPost和HttpGet(属于HttpClient模块)
1. 创建HttpPost对象，将要请求的URL通过构造方法传入HttpPost对象
```java
String url = Constants.TJ_OPEN_API_ID_CHECK +
      "?token=" + token +
      "&DEVID=" + myApp.getDeviceId() +
      "&SFZH=" + idNum;
HttpPost httppost = new HttpPost(url);
```
2. 使用DefaultHttpClient类的execute方法发送HTTP POST请求，并返回HttpResponse对象
```java
HttpParams parms = new BasicHttpParams();
parms.setParameter("charset", HTTP.UTF_8);
HttpConnectionParams.setConnectionTimeout(parms, 5 * 1000);
HttpConnectionParams.setSoTimeout(parms, 30 * 1000);

//创建DefaultHttpClient对象
DefaultHttpClient httpclient = new DefaultHttpClient(parms);

//返回HttpResponse对象
HttpResponse response;
response = httpclient.execute(httppost);
```
3. 通过HTTPResponse接口的getEntity方法返回响应信息，并进行响应的处理
```java
//返回Http状态  200表示成功
int code = response.getStatusLine().getStatusCode();
if (code == 200) {
  //获取响应信息
  HttpEntity entity = response.getEntity();
  //以utf-8的格式取出应答字符串
  String strResult = EntityUtils.toString(entity, "utf-8").trim();
}
```

## json数据创建和解析和Gson
### json数据解析
* Object(对象类型)：用{}包含一系列无序的key-value键值对表示，每个键值对之间用逗号隔开
* Array(数组类型)：用[]包含所有的元素，每个元素用逗号隔开
### 纯Object解析---JSONObject
```java
//      编辑一个我们要解析的数据对象
//      根据JSON的官方定义，键，加"",值，如果是字符串，就加""，其他不加。  
        String json = "{'name':'李书豪','age':24}";

        try {
//          创建JSON解析对象(两条规则的体现:大括号用JSONObject,注意传入数据对象)  
            JSONObject obj = new JSONObject(json);
//          obj.后面有各种数据类型,根据对象来选择使用的数据类型  
            String name = obj.getString("name");
//          同理如上，这里的age为Int类型，我们就用对应的类型进行解析  
            int age = obj.getInt("age");
        } catch (JSONException e) {
            e.printStackTrace();
        }
```

