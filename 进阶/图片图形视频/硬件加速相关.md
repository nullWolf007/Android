[TOC]

# 硬件加速相关

### 参考链接

* [Android官网-硬件加速](https://developer.android.com/guide/topics/graphics/hardware-accel#unsupported)

## 一、硬件加速指南

### 1.1 说明

* 从 Android 3.0（API 级别 11）开始，Android 2D 渲染管道支持硬件加速，也就是说，在 `View` 的画布上执行的所有绘制操作都会使用 GPU。启用硬件加速需要更多资源，因此应用会占用更多内存。如果您的目标 API 级别为 14 及更高级别，则硬件加速默认处于启用状态，但也可以明确启用该功能。如果您的应用仅使用标准视图和 `Drawable`，则全局启用硬件加速不会造成任何不良绘制效果。不过，并非所有 2D 绘制操作都支持硬件加速，因此启用硬件加速可能会影响您的部分自定义视图或绘制调用。具体问题通常以不可见的元素、异常或错误渲染的像素显现。

### 1.2 控制硬件加速

#### 1.2.1 应用级别

* 在Android清单文件中，将以下属性添加到`<application>`标记中，为整个应用启用硬件加速

```xml
	<application android:hardwareAccelerated="true" ...>
```

#### 1.2.2 Activity级别

* 如果全局启用硬件加速后，应用无法正常运行，可以针对Activity控制硬件加速。使用`<activity>`元素的`android:hardwareAccelerated`属性

```xml
    <application android:hardwareAccelerated="true">
        <activity ... />
        <activity android:hardwareAccelerated="false" />
    </application>
```

#### 1.2.3 窗口级别

* 如果需要实现更精细的控制，可以使用以下代码为给定窗口启用硬件加速
* 目前不支持窗口级别关闭硬件加速

```java
    getWindow().setFlags(
        WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED,
        WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED);
```

#### 1.2.4 视图级别

* 可以使用以下代码在运行时为单个视图停用硬件加速

```java
    myView.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
```

```xml
	<EditeText
    	android:layerType="software"       
	/>
```

### 1.3 确定视图是否经过硬件加速





